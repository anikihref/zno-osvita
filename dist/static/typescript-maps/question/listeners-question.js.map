{"version":3,"sources":["../../src/typescript/question/listeners-question.ts"],"names":[],"mappings":"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","file":"../../scripts/question/listeners-question.js","sourcesContent":["import { addClass } from \"../functions/attributes.js\";\r\nimport { hideElement, showElement } from \"../functions/elementActions.js\";\r\nimport { test } from \"../pages/test.js\";\r\nimport { recreateQuestionWrapper } from \"./create_func-question.js\";\r\n\r\n\r\nexport const questionLinksListener = (e): void => {\r\n    const target = e.target.closest(\".question__link\");\r\n    if (target == null) {\r\n        return;\r\n    }\r\n\r\n    // определяем вопрос на который нужно переключится\r\n    const nextQuestionInfo = test.allQuestionsList[target.dataset.id];\r\n\r\n    //! переопределяем текущий вопрос\r\n    test.info.currentInfo = nextQuestionInfo;\r\n    test.info.question =\r\n        test.questionActions.getQuestionObj(nextQuestionInfo);\r\n\r\n    if (test.info.questionSwitchLogic === \"single\") {\r\n        test.info.question.render();\r\n    } else if (test.info.questionSwitchLogic === \"seeAll\") {\r\n        // получаем data-id элемента по которому кликнули\r\n        const targetId = target.dataset.id;\r\n        // получаем html объект по этому же id\r\n        const $targetQuestion = document.querySelector(\r\n            `.question__wrapper${targetId}`\r\n        )!;\r\n\r\n        // получаем Y координаты html элемента вопроса\r\n        const yPos =\r\n            $targetQuestion.getBoundingClientRect().y +\r\n            window.pageYOffset;\r\n        // скроллим окно к этим координатам\r\n        window.scrollTo(0, yPos);\r\n        // изменяем номер вопроса\r\n    }\r\n}\r\n\r\nexport const buttonsListener = (e) => {\r\n    //! проверяем количество неотвеченных вопросов\r\n    test.info.checkAnswersNumber();\r\n    const target = e.target;\r\n    // текущий вопрос\r\n\r\n    // получаем следующий вопрос\r\n    const nextQuestion = test.info.isLastUnanswered\r\n        ? test.info.currentInfo\r\n        : test.questionActions.findNextQuestion(test.info.currentInfo);\r\n\r\n    switch (target) {\r\n        case test.elements.$seeAllQuestionsBtn: {\r\n            switch (test.info.questionSwitchLogic) {\r\n                case \"single\": {\r\n                    //! изменяем логику переключения между вопросами\r\n                    test.info.questionSwitchLogic = \"seeAll\";\r\n\r\n                    hideElement(test.elements.$nextBtn!);\r\n                    test.elements.$seeAllQuestionsBtn!.textContent =\r\n                        \"Дивитись один\";\r\n\r\n                    test.questionActions.seeAllQuestions();\r\n\r\n                    break;\r\n                }\r\n\r\n                case \"seeAll\": {\r\n                    //! изменяем логику переключения между вопросами\r\n                    test.info.questionSwitchLogic = \"single\";\r\n                    // пересоздаём обёртку вопроса\r\n                    recreateQuestionWrapper();\r\n                    // создаём текущий вопрос\r\n                    test.info.question.render();\r\n\r\n                    test.elements.$seeAllQuestionsBtn!.textContent =\r\n                        \"Дивитись усі\";\r\n                    // показываем кнопку \"следующий\"\r\n                    showElement(test.elements.$nextBtn!);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            break;\r\n        }\r\n\r\n        case test.elements.$btn: {\r\n            // получаем объект формы и затем получаем ответ\r\n            const answer = test.questionActions\r\n                .getQuestionObj(test.info.currentInfo)\r\n                .getAnswer();\r\n\r\n            // проверяем дал ли пользователь ответ\r\n            if (answer.some((answer) => answer)) {\r\n                //! добавляем поле ответа в объект вопроса\r\n                test.info.currentInfo.answer = answer;\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            // если мы на последнем вопросе\r\n            if (test.info.isLastUnanswered) {\r\n                //! Завершаем тест\r\n                test.finishTest();\r\n            }\r\n\r\n            addClass(\r\n                document.querySelector(\".question__link_active\")!,\r\n                \"question__link_done\"\r\n            );\r\n\r\n            // break не пишем чтобы сразу переключить вопрос\r\n        }\r\n\r\n        case test.elements.$nextBtn: {\r\n            //! переопределяем текущий вопрос\r\n            test.info.currentInfo = nextQuestion;\r\n            test.info.question =\r\n                test.questionActions.getQuestionObj(nextQuestion);\r\n            // переключаем вопрос\r\n            test.info.question.render();\r\n\r\n            break;\r\n        }\r\n\r\n        case test.elements.$endBtn: {\r\n            if (test.allQuestionsList.find((obj) => obj.answer)) {\r\n                // завершаем тест\r\n                test.finishTest();\r\n            } else {\r\n                console.log(\"дайте відповідь хоча б на одне питання\");\r\n            }\r\n\r\n            break;\r\n        }\r\n    }\r\n}\r\n"]}